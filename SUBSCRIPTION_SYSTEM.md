# –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–ø–∏—Å–æ–∫ FishTrackPro

## –û–±–∑–æ—Ä

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø–æ–¥–ø–∏—Å–æ–∫ —Å –¥–≤—É–º—è —É—Ä–æ–≤–Ω—è–º–∏ –¥–æ—Å—Ç—É–ø–∞: **Pro** –∏ **Premium**. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –æ–ø–ª–∞—á–∏–≤–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫–∏ –∫–∞–∫ –¥–µ–Ω—å–≥–∞–º–∏, —Ç–∞–∫ –∏ –±–æ–Ω—É—Å–∞–º–∏, –∑–∞—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–º–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.

## –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### üë§ –û–±—ã—á–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (user)
- –ë–∞–∑–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–ª–æ–≤–æ–≤
- –†–µ–∫–ª–∞–º–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

### ‚≠ê Pro –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- **–°—Ç–æ–∏–º–æ—Å—Ç—å**: 199‚ÇΩ –∏–ª–∏ 1990 –±–æ–Ω—É—Å–æ–≤ (30 –¥–Ω–µ–π)
- **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**:
  - –ù–µ–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ —É–ª–æ–≤—ã
  - –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
  - –ë–µ–∑ —Ä–µ–∫–ª–∞–º—ã

### üëë Premium –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- **–°—Ç–æ–∏–º–æ—Å—Ç—å**: 499‚ÇΩ –∏–ª–∏ 4990 –±–æ–Ω—É—Å–æ–≤ (30 –¥–Ω–µ–π)
- **–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**:
  - –í—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Pro
  - –°–æ–∑–¥–∞–Ω–∏–µ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ—á–∫–∞–º–∏
  - –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø
  - –ú–æ–¥–µ—Ä–∞—Ü–∏—è –≥—Ä—É–ø–ø
  - –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤ –ø–æ–∏—Å–∫–µ
  - **–ö–æ—Ä–æ–Ω–∞ —É –∞–≤–∞—Ç–∞—Ä–∫–∏** (–∑–æ–ª–æ—Ç–∞—è –∏–∫–æ–Ω–∫–∞)

### üîß –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä (admin)
- –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º
- –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å
- –ú–æ–¥–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞

## –°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã

### üí≥ –ü–ª–∞—Ç–µ–∂–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã
- **–Ø–Ω–¥–µ–∫—Å.–ü–ª–∞—Ç–µ–∂–∏** - –¥–ª—è —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–°–±–µ—Ä–±–∞–Ω–∫** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–∞–Ω–∫–æ–≤—Å–∫–∏–º–∏ –∫–∞—Ä—Ç–∞–º–∏
- **Apple Pay** - –¥–ª—è iOS —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- **Google Pay** - –¥–ª—è Android —É—Å—Ç—Ä–æ–π—Å—Ç–≤

### ‚≠ê –ë–æ–Ω—É—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- –û–ø–ª–∞—Ç–∞ –±–æ–Ω—É—Å–∞–º–∏ (1‚ÇΩ = 10 –±–æ–Ω—É—Å–æ–≤)
- –ó–∞—Ä–∞–±–æ—Ç–æ–∫ –±–æ–Ω—É—Å–æ–≤ –∑–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:
  - 10 –±–æ–Ω—É—Å–æ–≤ –∑–∞ –∫–∞–∂–¥—ã–π —É–ª–æ–≤
  - 1 –±–æ–Ω—É—Å –∑–∞ –ª–∞–π–∫
  - 2 –±–æ–Ω—É—Å–∞ –∑–∞ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
  - 5 –±–æ–Ω—É—Å–æ–≤ –∑–∞ —Ä–µ–ø–æ—Å—Ç
  - 5 –±–æ–Ω—É—Å–æ–≤ –∑–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–π –≤—Ö–æ–¥
  - –ú–∞–∫—Å–∏–º—É–º 100 –±–æ–Ω—É—Å–æ–≤ –≤ –¥–µ–Ω—å

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è

### Backend (Laravel)

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
```sql
-- –¢–∞–±–ª–∏—Ü–∞ –ø–æ–¥–ø–∏—Å–æ–∫
subscriptions:
- id, user_id, type (pro/premium)
- status (active/expired/cancelled)
- payment_method, amount, bonus_amount
- starts_at, expires_at, cancelled_at
- metadata (JSON)

-- –¢–∞–±–ª–∏—Ü–∞ –ø–ª–∞—Ç–µ–∂–µ–π
payments:
- id, user_id, subscription_id
- payment_id, provider, status
- type, amount, currency, bonus_amount
- provider_data, metadata
- paid_at, expires_at

-- –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
users:
- role (user/pro/premium/admin)
- is_premium, premium_expires_at
- crown_icon_url, bonus_balance
- last_bonus_earned_at
```

#### API Endpoints
```
GET    /api/v1/subscriptions/plans      - –ü–æ–ª—É—á–∏—Ç—å –ø–ª–∞–Ω—ã –ø–æ–¥–ø–∏—Å–æ–∫
GET    /api/v1/subscriptions/status     - –°—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
GET    /api/v1/subscriptions            - –°–ø–∏—Å–æ–∫ –ø–æ–¥–ø–∏—Å–æ–∫
POST   /api/v1/subscriptions            - –°–æ–∑–¥–∞—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
GET    /api/v1/subscriptions/{id}       - –î–µ—Ç–∞–ª–∏ –ø–æ–¥–ø–∏—Å–∫–∏
POST   /api/v1/subscriptions/{id}/cancel - –û—Ç–º–µ–Ω–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É
POST   /api/v1/subscriptions/{id}/extend - –ü—Ä–æ–¥–ª–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É

GET    /api/v1/payments/methods         - –°–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã
GET    /api/v1/payments                 - –ò—Å—Ç–æ—Ä–∏—è –ø–ª–∞—Ç–µ–∂–µ–π
POST   /api/v1/payments/process         - –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –ø–ª–∞—Ç–µ–∂
POST   /api/v1/payments/{id}/cancel     - –û—Ç–º–µ–Ω–∏—Ç—å –ø–ª–∞—Ç–µ–∂
POST   /api/v1/payments/{id}/refund     - –í–æ–∑–≤—Ä–∞—Ç –ø–ª–∞—Ç–µ–∂–∞
```

### Frontend (React + TypeScript)

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- **SubscriptionPage** - —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—ã–±–æ—Ä–∞ –∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∏
- **SubscriptionStatus** - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–ø–∏—Å–∫–∏
- **Avatar** - –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –ø–æ–∫–∞–∑–∞ –∫–æ—Ä–æ–Ω—ã —É Premium –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

#### –¢–∏–ø—ã TypeScript
```typescript
interface User {
  role: 'user' | 'pro' | 'premium' | 'admin';
  is_premium?: boolean;
  premium_expires_at?: string;
  crown_icon_url?: string;
  bonus_balance?: number;
}

interface Subscription {
  type: 'pro' | 'premium';
  status: 'active' | 'expired' | 'cancelled';
  payment_method: 'yandex_pay' | 'sber_pay' | 'apple_pay' | 'google_pay' | 'bonuses';
  amount?: number;
  bonus_amount?: number;
  expires_at?: string;
}

interface Payment {
  provider: 'yandex_pay' | 'sber_pay' | 'apple_pay' | 'google_pay' | 'bonuses';
  status: 'pending' | 'processing' | 'completed' | 'failed' | 'cancelled' | 'refunded';
  type: 'subscription_pro' | 'subscription_premium' | 'bonus_purchase';
  amount: number;
  bonus_amount?: number;
}
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–ø–∏—Å–æ–∫ (`backend/config/subscription.php`)
```php
'pro' => [
    'price_rub' => 199,
    'price_bonus' => 1990,
    'duration_days' => 30,
    'features' => [
        'unlimited_catches' => true,
        'advanced_statistics' => true,
        'priority_support' => true,
        'ad_free' => true,
    ],
],

'premium' => [
    'price_rub' => 499,
    'price_bonus' => 4990,
    'duration_days' => 30,
    'crown_icon_url' => 'https://cdn.fishtrackpro.ru/icons/crown.svg',
    'features' => [
        // –í—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Pro +
        'create_points' => true,
        'manage_points' => true,
        'create_groups' => true,
        'moderate_groups' => true,
        'priority_search' => true,
        'crown_badge' => true,
    ],
],
```

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- [x] –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π (user, pro, premium, admin)
- [x] –ü–æ–¥–ø–∏—Å–∫–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –∏—Å—Ç–µ—á–µ–Ω–∏–µ–º
- [x] –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –æ–ø–ª–∞—Ç—ã
- [x] –ë–æ–Ω—É—Å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞
- [x] –ö–æ—Ä–æ–Ω–∞ –¥–ª—è Premium –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [x] API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
- [x] Frontend –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- [x] –û—Ç–º–µ–Ω–∞ –∏ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫
- [x] –°–∏—Å—Ç–µ–º–∞ –≤–æ–∑–≤—Ä–∞—Ç–æ–≤
- [x] –ü—Ä–æ–±–Ω—ã–µ –ø–µ—Ä–∏–æ–¥—ã (7 –¥–Ω–µ–π)

### üîÑ –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø–ª–∞—Ç–µ–∂–Ω—ã–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ–¥–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫
- [ ] Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏
- [ ] –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –ø–æ–¥–ø–∏—Å–∫–∞–º
- [ ] –ü—Ä–æ–º–æ–∫–æ–¥—ã –∏ —Å–∫–∏–¥–∫–∏

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
1. –ü–µ—Ä–µ–π—Ç–∏ –≤ —Ä–∞–∑–¥–µ–ª "Pro" –≤ –Ω–∏–∂–Ω–µ–º –º–µ–Ω—é
2. –í—ã–±—Ä–∞—Ç—å –ø–ª–∞–Ω –ø–æ–¥–ø–∏—Å–∫–∏ (Pro –∏–ª–∏ Premium)
3. –í—ã–±—Ä–∞—Ç—å —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã
4. –û—Ñ–æ—Ä–º–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É –∏–ª–∏ –Ω–∞—á–∞—Ç—å –ø—Ä–æ–±–Ω—ã–π –ø–µ—Ä–∏–æ–¥

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
```typescript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
const user = await profileMe();
if (user.role === 'premium' || user.is_premium) {
  // Premium —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
}

// –ü–æ–ª—É—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–ø–∏—Å–∫–∏
const status = await getSubscriptionStatus();
if (status.is_premium) {
  // –ü–æ–∫–∞–∑–∞—Ç—å –∫–æ—Ä–æ–Ω—É
  <Avatar crownIconUrl={status.crown_icon_url} isPremium={true} />
}
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –í—Å–µ –ø–ª–∞—Ç–µ–∂–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ –∑–∞—â–∏—â–µ–Ω–Ω—ã–µ API
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–æ–∫ –Ω–∞ backend
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π —Å –ø–æ–¥–ø–∏—Å–∫–∞–º–∏
- –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä–æ–±–Ω—ã—Ö –ø–µ—Ä–∏–æ–¥–æ–≤

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏ –≤ –ø–æ–¥–ø–∏—Å–∫–∏
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ —Å–ø–æ—Å–æ–±–∞–º –æ–ø–ª–∞—Ç—ã
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—Ç–º–µ–Ω –ø–æ–¥–ø–∏—Å–æ–∫
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –±–æ–Ω—É—Å–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ

---

**–°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–ø–∏—Å–æ–∫ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏ –ª–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏ —Å–ø–æ—Å–æ–±–æ–≤ –æ–ø–ª–∞—Ç—ã!** üöÄ
